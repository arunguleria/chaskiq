<%= turbo_frame_tag "campaign-editor-form" do %>
  <%= form_for @campaign, url: app_campaign_path(@app.key, @campaign, tab: :banner) do |f| %>

    <div class="border rounded-md flex flex-col shadow-md">
      <div class="bg-gray-300">
        <div class="flex space-x-2 p-3">
          <div class="border border-gray-600 rounded-full h-3 w-3 bg-red-500"></div>
          <div class="border border-gray-600 rounded-full h-3 w-3 bg-yellow-500"></div>
          <div class="border border-gray-600 rounded-full h-3 w-3 bg-green-500"></div>
        </div>
      </div>

      <div class="bg-white">
        <div class="relative" style="height: 72px;">

          <%= render Banner::Component.new(
            **@campaign.banner_data, 
            serialized_content: @campaign.serialized_content
          ) do %>

            <div 
              data-controller="dante-editor" 
              data-content="<%= @campaign.serialized_content %>"
              data-theme="dark">
              <div data-dante-editor-target="container"></div>

              <%= f.hidden_field :serialized_content, 
                data: {"dante-editor-target": "serializedInput"},
                value: f.object.serialized_content.to_json
              %>
            </div>

          <% end %>

          <!--<div 
            data-controller="dante-editor" 
            data-content="<%= @campaign.serialized_content %>">
            <div data-dante-editor-target="container"></div>

            <%= f.hidden_field :serialized_content, 
              data: {"dante-editor-target": "serializedInput"},
              value: f.object.serialized_content.to_json
            %>
          </div>-->

        </div>
      </div>
    </div>


    <div class="p-5 border-t rounded-b-md bg-gray-100">

      <div class="flex space-x-4">

        <div class="flex flex-col w-1/3 justify-between">

          <div class="flex flex-col pr-6 justify-between">
            <%= f.check_box :dismiss_button %>
            <%= f.check_box :show_sender %>
            <%= f.select :sender_id, @app.agents.humans.map{|o| 
              [(o.display_name || o.email), o.id]
            }, {} %>
          </div>
        </div>

        <div class="flex flex-col w-1/3 justify-between">
          <%= f.text_field :url %>
          <%= f.text_field :action_text %>
        </div>

        <div class="flex flex-col w-1/3 justify-between">
          <%= f.select :font_options, [
            ['None', nil],
            ['Lato', 'Lato'],
            ['OpenSans', 'Open+Sans'],
            ['Roboto', 'Roboto'],
            ['Montserrat', 'Montserrat'],
            ['Merriweather', 'Merriweather'],
            ['Poppins', 'Poppins'],
            ['Roboto+Mono', 'Roboto+Mono'],
            ['Pt+Sans', 'Pt+Sans'],
            ['Ubuntu', 'Ubuntu'],
            ], {} 
          %>
          <%= f.color_field :bg_color %>

          <div class="flex flex-wrap justify-between space-y-4">
            <%= f.radio_button :placement, :top, label: :top %>
            <%= f.radio_button :placement, :bottom, label: :bottom %>
          </div>
          <div class="flex flex-wrap justify-between space-y-4">
            <%= f.radio_button :placement, :fixed, label: :fixed %>
            <%= f.radio_button :placement, :inline, label: :inline %>
          </div>
        </div>
      </div>

      <%= f.submit %>

    </div>

  <% end %>
<% end %>
