
<% if form.object.type == "ask_option" %>
  <div
    data-controller="nested-form" 
    class="nested-fields"
    data-new-record="true">

    <template 
      data-nested-form-target="template">
      <%= form.fields_for :schema, 
        BotPathStepSchema.new({element: 'button', label: 'write here', next_step_uuid: nil }), 
        child_index: 'NEW_RECORD' do |ff| %>
        <%= render "apps/bots/editor/ask_option", form: ff %>
      <% end %>
    </template>

    <% #= form.object.class %>
    <% #= form.object.schema %>
  --
    <%= form.text_field :type %>

    <%= form.fields_for :schema, form.object.schema do |f| %>
      <%= render "apps/bots/editor/ask_option_fields", form: f %>
    <% end %>

    <div class="my-3" data-nested-form-target="links">
      <%= link_to "Add message", "#", 
        class: "btn btn-outlined", 
        data: {  action: "click->nested-form#add_association" } 
      %>
    </div>


    <button class="btn btn-icon"
      data-action="click->bots#removeBotStep click->nested-form#remove_association"
      data-bot-step="bot-step-<%= bot_step %>"
      type="button">
      <%= heroicon("x-circle") %>
    </button>
  </div>
<% end %>
